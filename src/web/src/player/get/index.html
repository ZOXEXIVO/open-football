{% extends "layout.html" %}

{% block html_title %}{{ title }} - {{ player.team_name }}{% endblock %}

{% block submenu %}
<div class="fm-tabbar">
    <a class="fm-tab active" href="/{{ lang }}/players/{{ player.id }}">{{ i18n.t("overview") }}</a>
    <a class="fm-tab" href="/{{ lang }}/players/{{ player.id }}/matches">{{ i18n.t("matches") }}</a>
    <a class="fm-tab" href="/{{ lang }}/players/{{ player.id }}/history">{{ i18n.t("history") }}</a>
</div>
{% endblock %}

{% block content %}
<div class="fm-page">
    <section class="fm-player-header">
        <div class="fm-ph-banner">
            <div class="fm-ph-photo">
                <div class="fm-ph-photo-frame">
                    <div class="fm-ph-photo-img"><img src="/api/players/{{ player.id }}/face.svg?age={{ player.age }}" alt="Player face"></div>
                </div>
            </div>
            <div class="fm-ph-identity">
                <div class="fm-ph-id-cols">
                    <div class="fm-ph-id-col">
                        <div class="fm-ph-name-row">
                            <a href="/{{ lang }}/countries/{{ player.country_slug }}" class="fm-ph-flag">
                                <span class="flag flag-{{ player.country_code }}" title="{{ player.country_name }}"></span>
                            </a>
                            <span class="fm-ph-age">{{ i18n.t("age") }}: {{ player.age }}</span>
                            <span class="fm-ph-sep"></span>
                            <span class="fm-ph-born">{{ player.birth_date }}</span>
                        </div>
                        <div class="fm-ph-meta">
                            <span class="fm-detail-value">{{ i18n.t("caps_goals").replace("{caps}", &player.player_attributes.international_apps.to_string()).replace("{goals}", &player.player_attributes.international_goals.to_string()) }}</span>
                        </div>
                        {% if player.player_attributes.under_21_international_apps > 0 %}
                        <div class="fm-ph-meta">
                            <span class="fm-detail-value">{{ i18n.t("u21") }}: {{ i18n.t("caps_goals").replace("{caps}", &player.player_attributes.under_21_international_apps.to_string()).replace("{goals}", &player.player_attributes.under_21_international_goals.to_string()) }}</span>
                        </div>
                        {% endif %}
                    </div>
                    <div class="fm-ph-id-col">
                        {% if let Some(loan) = player.loan_status %}
                        <div class="fm-ph-loan">
                            {% if loan.is_loan_in %}
                            <span class="fm-ph-loan-label loan-in">{{ i18n.t("on_loan") }}</span> <span class="fm-ph-loan-text">{{ i18n.t("loan_from") }} <a href="/{{ lang }}/teams/{{ loan.club_slug }}">{{ loan.club_name }}</a></span>
                            {% else %}
                            <span class="fm-ph-loan-label loan-out">{{ i18n.t("on_loan") }}</span> <span class="fm-ph-loan-text">{{ i18n.t("loan_to") }} <a href="/{{ lang }}/teams/{{ loan.club_slug }}">{{ loan.club_name }}</a></span>
                            {% endif %}
                        </div>
                        {% else %}
                        <div class="fm-ph-meta">
                            <span class="fm-detail-value">{{ i18n.t("contracted_to") }} <a href="/{{ lang }}/teams/{{ player.team_slug }}">{{ player.team_name }}</a></span>
                        </div>
                        {% endif %}
                        {% if let Some(contract) = player.contract %}
                        <div class="fm-ph-meta">
                            <span class="fm-detail-value">${{ contract.salary }}K {{ i18n.t("per_week") }}</span>
                            <span class="fm-ph-sep"></span>
                            <span class="fm-detail-value">{{ i18n.t("salary_until") }} {{ contract.expiration }}</span>
                        </div>
                        {% if !contract.squad_status.is_empty() %}
                        <div class="fm-ph-meta">
                            <span class="fm-detail-value">{{ i18n.t(&contract.squad_status) }}</span>
                        </div>
                        {% endif %}
                        {% endif %}
                    </div>
                    <div class="fm-ph-id-col">
                        <div class="fm-ph-rating-item">
                            <span class="fm-ph-rlabel">{{ i18n.t("condition") }}</span>
                            <div class="fm-cond">
                                <div class="fm-cond-bar"><div class="fm-cond-fill" style="width:{{ player.conditions }}%"></div></div>
                                <span class="fm-cond-val">{{ player.conditions }}%</span>
                            </div>
                        </div>
                        <div class="fm-ph-rating-item">
                            <span class="fm-ph-rlabel">{{ i18n.t("ability") }}</span>
                            <span class="fm-stars fm-stars-lg">{% for _ in 0..player.current_ability %}<span class="star on"></span>{% endfor %}{% for _ in 0..(5 - player.current_ability) %}<span class="star"></span>{% endfor %}</span>
                        </div>
                        <div class="fm-ph-rating-item">
                            <span class="fm-ph-rlabel">{{ i18n.t("potential") }}</span>
                            <span class="fm-stars fm-stars-lg">{% for _ in 0..player.potential_ability %}<span class="star on"></span>{% endfor %}{% for _ in 0..(5 - player.potential_ability) %}<span class="star"></span>{% endfor %}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <div class="fm-player-grid">
        <div class="fm-player-grid-left">
            <section class="fm-panel">
                <div class="fm-panel-head">
                    <h3>{{ i18n.t("positions") }}</h3>
                </div>
                <div class="fp-pitch">
                    <div class="fp-field">
                        <div class="fp-half-line"></div>
                        <div class="fp-center-circle"></div>
                        <div class="fp-penalty-area fp-pa-top"></div>
                        <div class="fp-goal-area fp-ga-top"></div>
                        <div class="fp-penalty-area fp-pa-bot"></div>
                        <div class="fp-goal-area fp-ga-bot"></div>
                        <span class="fp-dot fp-gk{% if player.position_map.gk %} fp-on{% endif %}{% if player.position_map.primary == "GK" %} fp-primary{% endif %}">GK</span>
                        <span class="fp-dot fp-sw{% if player.position_map.sw %} fp-on{% endif %}{% if player.position_map.primary == "SW" %} fp-primary{% endif %}">SW</span>
                        <span class="fp-dot fp-dl{% if player.position_map.dl %} fp-on{% endif %}{% if player.position_map.primary == "DL" %} fp-primary{% endif %}">DL</span>
                        <span class="fp-dot fp-dcl{% if player.position_map.dcl %} fp-on{% endif %}{% if player.position_map.primary == "DCL" %} fp-primary{% endif %}">DCL</span>
                        <span class="fp-dot fp-dc{% if player.position_map.dc %} fp-on{% endif %}{% if player.position_map.primary == "DC" %} fp-primary{% endif %}">DC</span>
                        <span class="fp-dot fp-dcr{% if player.position_map.dcr %} fp-on{% endif %}{% if player.position_map.primary == "DCR" %} fp-primary{% endif %}">DCR</span>
                        <span class="fp-dot fp-dr{% if player.position_map.dr %} fp-on{% endif %}{% if player.position_map.primary == "DR" %} fp-primary{% endif %}">DR</span>
                        <span class="fp-dot fp-wl{% if player.position_map.wl %} fp-on{% endif %}{% if player.position_map.primary == "WL" %} fp-primary{% endif %}">WL</span>
                        <span class="fp-dot fp-dm{% if player.position_map.dm %} fp-on{% endif %}{% if player.position_map.primary == "DM" %} fp-primary{% endif %}">DM</span>
                        <span class="fp-dot fp-wr{% if player.position_map.wr %} fp-on{% endif %}{% if player.position_map.primary == "WR" %} fp-primary{% endif %}">WR</span>
                        <span class="fp-dot fp-ml{% if player.position_map.ml %} fp-on{% endif %}{% if player.position_map.primary == "ML" %} fp-primary{% endif %}">ML</span>
                        <span class="fp-dot fp-mcl{% if player.position_map.mcl %} fp-on{% endif %}{% if player.position_map.primary == "MCL" %} fp-primary{% endif %}">MCL</span>
                        <span class="fp-dot fp-mc{% if player.position_map.mc %} fp-on{% endif %}{% if player.position_map.primary == "MC" %} fp-primary{% endif %}">MC</span>
                        <span class="fp-dot fp-mcr{% if player.position_map.mcr %} fp-on{% endif %}{% if player.position_map.primary == "MCR" %} fp-primary{% endif %}">MCR</span>
                        <span class="fp-dot fp-mr{% if player.position_map.mr %} fp-on{% endif %}{% if player.position_map.primary == "MR" %} fp-primary{% endif %}">MR</span>
                        <span class="fp-dot fp-aml{% if player.position_map.aml %} fp-on{% endif %}{% if player.position_map.primary == "AML" %} fp-primary{% endif %}">AML</span>
                        <span class="fp-dot fp-amc{% if player.position_map.amc %} fp-on{% endif %}{% if player.position_map.primary == "AMC" %} fp-primary{% endif %}">AMC</span>
                        <span class="fp-dot fp-amr{% if player.position_map.amr %} fp-on{% endif %}{% if player.position_map.primary == "AMR" %} fp-primary{% endif %}">AMR</span>
                        <span class="fp-dot fp-fl{% if player.position_map.fl %} fp-on{% endif %}{% if player.position_map.primary == "FL" %} fp-primary{% endif %}">FL</span>
                        <span class="fp-dot fp-fc{% if player.position_map.fc %} fp-on{% endif %}{% if player.position_map.primary == "FC" %} fp-primary{% endif %}">FC</span>
                        <span class="fp-dot fp-fr{% if player.position_map.fr %} fp-on{% endif %}{% if player.position_map.primary == "FR" %} fp-primary{% endif %}">FR</span>
                        <span class="fp-dot fp-st{% if player.position_map.st %} fp-on{% endif %}{% if player.position_map.primary == "ST" %} fp-primary{% endif %}">ST</span>
                    </div>
                </div>
                <div class="fm-pref-foot">
                    <span class="fm-detail-label">{{ i18n.t("preferred_foot") }}</span>
                    <span class="fm-detail-value">{{ player.preferred_foot }}</span>
                </div>
            </section>
        </div>
        <div class="fm-player-grid-right">
            <section class="fm-panel">
                <div class="fm-panel-head">
                    <h3>{{ i18n.t("attributes") }}</h3>
                </div>
                <div class="fm-skills-grid">
                    <div class="fm-skill-col">
                        <h4>{{ i18n.t("technical") }}</h4>
                        <table class="fm-skills">
                            <tr><td>{{ i18n.t("corners") }}</td><td class="td_{{ player.skills.technical.corners }}">{{ player.skills.technical.corners }}</td></tr>
                            <tr><td>{{ i18n.t("crossing") }}</td><td class="td_{{ player.skills.technical.crossing }}">{{ player.skills.technical.crossing }}</td></tr>
                            <tr><td>{{ i18n.t("finishing") }}</td><td class="td_{{ player.skills.technical.finishing }}">{{ player.skills.technical.finishing }}</td></tr>
                            <tr><td>{{ i18n.t("first_touch") }}</td><td class="td_{{ player.skills.technical.first_touch }}">{{ player.skills.technical.first_touch }}</td></tr>
                            <tr><td>{{ i18n.t("free_kick_taking") }}</td><td class="td_{{ player.skills.technical.free_kick_taking }}">{{ player.skills.technical.free_kick_taking }}</td></tr>
                            <tr><td>{{ i18n.t("heading") }}</td><td class="td_{{ player.skills.technical.heading }}">{{ player.skills.technical.heading }}</td></tr>
                            <tr><td>{{ i18n.t("long_shots") }}</td><td class="td_{{ player.skills.technical.long_shots }}">{{ player.skills.technical.long_shots }}</td></tr>
                            <tr><td>{{ i18n.t("long_throws") }}</td><td class="td_{{ player.skills.technical.long_throws }}">{{ player.skills.technical.long_throws }}</td></tr>
                            <tr><td>{{ i18n.t("marking") }}</td><td class="td_{{ player.skills.technical.marking }}">{{ player.skills.technical.marking }}</td></tr>
                            <tr><td>{{ i18n.t("passing") }}</td><td class="td_{{ player.skills.technical.passing }}">{{ player.skills.technical.passing }}</td></tr>
                            <tr><td>{{ i18n.t("penalty_taking") }}</td><td class="td_{{ player.skills.technical.penalty_taking }}">{{ player.skills.technical.penalty_taking }}</td></tr>
                            <tr><td>{{ i18n.t("tackling") }}</td><td class="td_{{ player.skills.technical.tackling }}">{{ player.skills.technical.tackling }}</td></tr>
                            <tr><td>{{ i18n.t("technique") }}</td><td class="td_{{ player.skills.technical.technique }}">{{ player.skills.technical.technique }}</td></tr>
                        </table>
                    </div>
                    <div class="fm-skill-col">
                        <h4>{{ i18n.t("mental") }}</h4>
                        <table class="fm-skills">
                            <tr><td>{{ i18n.t("aggression") }}</td><td class="td_{{ player.skills.mental.aggression }}">{{ player.skills.mental.aggression }}</td></tr>
                            <tr><td>{{ i18n.t("anticipation") }}</td><td class="td_{{ player.skills.mental.anticipation }}">{{ player.skills.mental.anticipation }}</td></tr>
                            <tr><td>{{ i18n.t("composure") }}</td><td class="td_{{ player.skills.mental.composure }}">{{ player.skills.mental.composure }}</td></tr>
                            <tr><td>{{ i18n.t("concentration") }}</td><td class="td_{{ player.skills.mental.concentration }}">{{ player.skills.mental.concentration }}</td></tr>
                            <tr><td>{{ i18n.t("decisions") }}</td><td class="td_{{ player.skills.mental.decisions }}">{{ player.skills.mental.decisions }}</td></tr>
                            <tr><td>{{ i18n.t("determination") }}</td><td class="td_{{ player.skills.mental.determination }}">{{ player.skills.mental.determination }}</td></tr>
                            <tr><td>{{ i18n.t("flair") }}</td><td class="td_{{ player.skills.mental.flair }}">{{ player.skills.mental.flair }}</td></tr>
                            <tr><td>{{ i18n.t("leadership") }}</td><td class="td_{{ player.skills.mental.leadership }}">{{ player.skills.mental.leadership }}</td></tr>
                            <tr><td>{{ i18n.t("off_the_ball") }}</td><td class="td_{{ player.skills.mental.off_the_ball }}">{{ player.skills.mental.off_the_ball }}</td></tr>
                            <tr><td>{{ i18n.t("positioning") }}</td><td class="td_{{ player.skills.mental.positioning }}">{{ player.skills.mental.positioning }}</td></tr>
                            <tr><td>{{ i18n.t("teamwork") }}</td><td class="td_{{ player.skills.mental.teamwork }}">{{ player.skills.mental.teamwork }}</td></tr>
                            <tr><td>{{ i18n.t("vision") }}</td><td class="td_{{ player.skills.mental.vision }}">{{ player.skills.mental.vision }}</td></tr>
                            <tr><td>{{ i18n.t("work_rate") }}</td><td class="td_{{ player.skills.mental.work_rate }}">{{ player.skills.mental.work_rate }}</td></tr>
                        </table>
                    </div>
                    <div class="fm-skill-col">
                        <h4>{{ i18n.t("physical") }}</h4>
                        <table class="fm-skills">
                            <tr><td>{{ i18n.t("acceleration") }}</td><td class="td_{{ player.skills.physical.acceleration }}">{{ player.skills.physical.acceleration }}</td></tr>
                            <tr><td>{{ i18n.t("agility") }}</td><td class="td_{{ player.skills.physical.agility }}">{{ player.skills.physical.agility }}</td></tr>
                            <tr><td>{{ i18n.t("jumping_reach") }}</td><td class="td_{{ player.skills.physical.jumping_reach }}">{{ player.skills.physical.jumping_reach }}</td></tr>
                            <tr><td>{{ i18n.t("natural_fitness") }}</td><td class="td_{{ player.skills.physical.natural_fitness }}">{{ player.skills.physical.natural_fitness }}</td></tr>
                            <tr><td>{{ i18n.t("pace") }}</td><td class="td_{{ player.skills.physical.pace }}">{{ player.skills.physical.pace }}</td></tr>
                            <tr><td>{{ i18n.t("stamina") }}</td><td class="td_{{ player.skills.physical.stamina }}">{{ player.skills.physical.stamina }}</td></tr>
                            <tr><td>{{ i18n.t("strength") }}</td><td class="td_{{ player.skills.physical.strength }}">{{ player.skills.physical.strength }}</td></tr>
                        </table>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <section class="fm-panel mt-3">
        <div class="fm-panel-head">
            <h3>{{ i18n.t("statistics") }}</h3>
        </div>
        <table class="fm-stats">
            <thead>
                <tr>
                    <th>{{ i18n.t("competition") }}</th>
                    <th>{{ i18n.t("apps") }}</th>
                    <th>{{ i18n.t("gls") }}</th>
                    <th>{{ i18n.t("ast") }}</th>
                    <th>{{ i18n.t("pen") }}</th>
                    <th>{{ i18n.t("pom") }}</th>
                    <th>{{ i18n.t("yc") }}</th>
                    <th>{{ i18n.t("rc") }}</th>
                    <th>{{ i18n.t("sot") }}</th>
                    <th>{{ i18n.t("pass_pct") }}</th>
                    <th>{{ i18n.t("tck_w") }}</th>
                    <th>{{ i18n.t("av_rat") }}</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>{{ i18n.t("league") }}</td>
                    <td>{{ player.statistics.played }}{% if player.statistics.played_subs > 0 %} ({{ player.statistics.played_subs }}){% endif %}</td>
                    <td>{{ player.statistics.goals }}</td>
                    <td>{{ player.statistics.assists }}</td>
                    <td>{{ player.statistics.penalties }}</td>
                    <td>{{ player.statistics.player_of_the_match }}</td>
                    <td>{{ player.statistics.yellow_cards }}</td>
                    <td>{{ player.statistics.red_cards }}</td>
                    <td>{{ player.statistics.shots_on_target }}</td>
                    <td>{{ player.statistics.passes }}</td>
                    <td>{{ player.statistics.tackling }}</td>
                    <td>{{ player.statistics.average_rating }}</td>
                </tr>
            </tbody>
        </table>
    </section>
</div>
{% endblock %}
